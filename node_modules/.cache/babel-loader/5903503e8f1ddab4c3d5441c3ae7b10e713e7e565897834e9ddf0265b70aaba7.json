{"ast":null,"code":"var _jsxFileName = \"/home/georg/kood/racetrack/src/front/pages/RaceControlPage.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport RaceFlagsPage from \"./RaceFlagsPage\";\nimport Button from \"./components/Button/Button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RaceControlPage({\n  socket\n}) {\n  _s();\n  const [raceMode, setRaceMode] = useState(\"Danger\");\n  const [remainingTime, setRemainingTime] = useState(0);\n  const [isRaceRunning, setIsRaceRunning] = useState(false);\n  const [showControl, setShoeControl] = useState(false);\n  useEffect(() => {\n    socket.emit(\"get_coming_running_race\");\n  }, []);\n  useEffect(() => {\n    socket.on(\"race_state\", data => {\n      setRaceMode(data.raceMode);\n      setRemainingTime(data.remainingTime);\n      setIsRaceRunning(data.isRaceRunning);\n    });\n    socket.on(\"has_coming_running_race\", data => {\n      console.log(data);\n      setShoeControl(data);\n    });\n    return () => {\n      socket.off(\"race_state\");\n      socket.off(\"has_coming_running_race\");\n    };\n  }, [socket]);\n  const startRace = () => {\n    socket.emit(\"start_race\");\n  };\n  const stopRace = () => {\n    socket.emit(\"stop_race\");\n    socket.emit(\"finish_session\");\n  };\n  const changeRaceMode = mode => {\n    socket.emit(\"set_race_mode\", mode);\n    if (mode === \"Finish\") socket.emit(\"finish_session\");\n  };\n  const formatTime = () => {\n    const minutes = Math.floor(remainingTime / 60).toString().padStart(2, \"0\");\n    const seconds = (remainingTime % 60).toString().padStart(2, \"0\");\n    return `${minutes}:${seconds}`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"race-control\",\n    children: [showControl && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Hide Buttons When no next race\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 29\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Race Control\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Race Mode: \", raceMode]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Time Remaining: \", formatTime()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        gap: \"5px\",\n        marginBottom: \"10px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => changeRaceMode(\"Safe\"),\n        disabled: !isRaceRunning,\n        children: \"Safe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => changeRaceMode(\"Hazard\"),\n        disabled: !isRaceRunning,\n        children: \"Hazard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => changeRaceMode(\"Danger\"),\n        disabled: !isRaceRunning,\n        children: \"Danger\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => changeRaceMode(\"Finish\"),\n        disabled: !isRaceRunning,\n        children: \"Finish\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          gap: \"5px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: startRace,\n          disabled: isRaceRunning,\n          children: \"Start Race\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: stopRace,\n          disabled: !isRaceRunning,\n          children: \"Stop Race\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(RaceFlagsPage, {\n      socket: socket\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n}\n_s(RaceControlPage, \"7VMQOkZKjG/XHRchQPs9Rec43W4=\");\n_c = RaceControlPage;\nexport default RaceControlPage;\nvar _c;\n$RefreshReg$(_c, \"RaceControlPage\");","map":{"version":3,"names":["useEffect","useState","RaceFlagsPage","Button","jsxDEV","_jsxDEV","RaceControlPage","socket","_s","raceMode","setRaceMode","remainingTime","setRemainingTime","isRaceRunning","setIsRaceRunning","showControl","setShoeControl","emit","on","data","console","log","off","startRace","stopRace","changeRaceMode","mode","formatTime","minutes","Math","floor","toString","padStart","seconds","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","display","justifyContent","gap","marginBottom","onClick","disabled","_c","$RefreshReg$"],"sources":["/home/georg/kood/racetrack/src/front/pages/RaceControlPage.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport RaceFlagsPage from \"./RaceFlagsPage\";\nimport Button from \"./components/Button/Button\";\n\nfunction RaceControlPage({socket}) {\n    const [raceMode, setRaceMode] = useState(\"Danger\");\n    const [remainingTime, setRemainingTime] = useState(0);\n    const [isRaceRunning, setIsRaceRunning] = useState(false);\n    const [showControl, setShoeControl] = useState(false)\n    useEffect(() => {\n        socket.emit(\"get_coming_running_race\")\n    }, [])\n    useEffect(() => {\n        socket.on(\"race_state\", (data) => {\n            setRaceMode(data.raceMode);\n            setRemainingTime(data.remainingTime)\n            setIsRaceRunning(data.isRaceRunning)\n        });\n        socket.on(\"has_coming_running_race\", (data) => {\n            console.log(data)\n            setShoeControl(data)\n        })\n        return () => {\n            socket.off(\"race_state\");\n            socket.off(\"has_coming_running_race\")\n        }\n    }, [socket]);\n\n    const startRace = () => {\n        socket.emit(\"start_race\");\n    }\n\n    const stopRace = () => {\n        socket.emit(\"stop_race\");\n        socket.emit(\"finish_session\")\n    }\n\n    const changeRaceMode = (mode) => {\n        socket.emit(\"set_race_mode\", mode);\n        if (mode === \"Finish\")\n            socket.emit(\"finish_session\")\n    }\n\n    const formatTime = () => {\n        const minutes = Math.floor(remainingTime / 60).toString().padStart(2, \"0\");\n        const seconds = (remainingTime % 60).toString().padStart(2, \"0\");\n\n        return `${minutes}:${seconds}`;\n    }\n\n    return (\n        <div className=\"race-control\">\n            {/*TODO: Hide Buttons When no next race*/}\n            {showControl && <div>Hide Buttons When no next race</div>}\n            <h1>Race Control</h1>\n            <h2>Race Mode: {raceMode}</h2>\n            <h2>Time Remaining: {formatTime()}</h2>\n            <div style={{display: \"flex\", justifyContent: \"center\", gap: \"5px\", marginBottom: \"10px\"}}>\n                <Button onClick={() => changeRaceMode(\"Safe\")} disabled={!isRaceRunning}>Safe</Button>\n                <Button onClick={() => changeRaceMode(\"Hazard\")} disabled={!isRaceRunning}>Hazard</Button>\n                <Button onClick={() => changeRaceMode(\"Danger\")} disabled={!isRaceRunning}>Danger</Button>\n                <Button onClick={() => changeRaceMode(\"Finish\")} disabled={!isRaceRunning}>Finish</Button>\n            </div>\n            <div>\n                <div style={{display: \"flex\", justifyContent: \"center\", gap: \"5px\"}}>\n                    <Button onClick={startRace} disabled={isRaceRunning}>Start Race</Button>\n                    <Button onClick={stopRace} disabled={!isRaceRunning}>Stop Race</Button>\n                </div>\n            </div>\n            <br/>\n            <RaceFlagsPage socket={socket}/>\n            <br/>\n        </div>\n    )\n}\n\nexport default RaceControlPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}