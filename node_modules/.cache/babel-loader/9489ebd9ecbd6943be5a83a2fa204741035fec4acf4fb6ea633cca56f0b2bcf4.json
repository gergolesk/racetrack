{"ast":null,"code":"var _jsxFileName = \"/home/georg/kood/racetrack/src/front/Login.js\",\n  _s = $RefreshSig$();\nimport { useRef, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Button from \"./pages/components/Button/Button\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst userTypes = [\"RECEPTIONIST\", \"OBSERVER\", \"SAFETY\"];\nconst userTypeKeys = {\n  RECEPTIONIST: \"RECEPTIONIST_KEY\",\n  OBSERVER: \"OBSERVER_KEY\",\n  SAFETY: \"SAFETY_KEY\"\n};\nfunction Login({\n  socket\n}) {\n  _s();\n  const userTypeRef = useRef(null);\n  const passwordRef = useRef(null);\n  const navigate = useNavigate();\n  const [error, setError] = useState('');\n  function signIn() {\n    const userData = {\n      user: userTypeRef.current.value,\n      password: passwordRef.current.value\n    };\n    if (!userData.user || !userData.password) {\n      setError(\"Please select a user type and enter a password.\");\n      return;\n    }\n    socket.emit(\"validate_access_key\", userData, response => {\n      if (response.success) {\n        sessionStorage.setItem(\"accessKey\", response.message);\n        navigate(\"/\");\n      } else {\n        setError(\"Access key not correct\");\n      }\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => {\n        e.preventDefault();\n        signIn();\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"user\",\n        children: \"Select user type:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 64\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"user\",\n        id: \"user\",\n        ref: userTypeRef,\n        children: userTypes.map(userType => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: userTypeKeys[userType],\n          children: userType\n        }, userType, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 26\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 41\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: passwordRef,\n        type: \"password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 60\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"UTproEAhHOIPQVsu123BUoANWpY=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useRef","useState","useNavigate","Button","jsxDEV","_jsxDEV","userTypes","userTypeKeys","RECEPTIONIST","OBSERVER","SAFETY","Login","socket","_s","userTypeRef","passwordRef","navigate","error","setError","signIn","userData","user","current","value","password","emit","response","success","sessionStorage","setItem","message","children","onSubmit","e","preventDefault","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","name","id","ref","map","userType","type","className","_c","$RefreshReg$"],"sources":["/home/georg/kood/racetrack/src/front/Login.js"],"sourcesContent":["import {useRef, useState} from \"react\";\nimport {useNavigate} from \"react-router-dom\";\nimport Button from \"./pages/components/Button/Button\";\n\nconst userTypes = [\"RECEPTIONIST\", \"OBSERVER\", \"SAFETY\"];\nconst userTypeKeys = {\n    RECEPTIONIST: \"RECEPTIONIST_KEY\",\n    OBSERVER: \"OBSERVER_KEY\",\n    SAFETY: \"SAFETY_KEY\"\n};\n\n\nfunction Login({socket}) {\n    const userTypeRef = useRef(null)\n    const passwordRef = useRef(null)\n    const navigate = useNavigate()\n    const [error, setError] = useState('')\n\n    function signIn() {\n        const userData = {\n            user: userTypeRef.current.value,\n            password: passwordRef.current.value\n        }\n\n        if (!userData.user || !userData.password) {\n            setError(\"Please select a user type and enter a password.\");\n            return;\n        }\n\n        socket.emit(\"validate_access_key\", userData, (response) => {\n            if (response.success) {\n                sessionStorage.setItem(\"accessKey\", response.message);\n                navigate(\"/\");\n            } else {\n                setError(\"Access key not correct\")\n            }\n        })\n    }\n\n    return (\n        <div>\n            {/*form lets submit with enter*/}\n            <form onSubmit={(e) => {\n                e.preventDefault();\n                signIn();\n            }}>\n                <label htmlFor=\"user\">Select user type:</label><br/>\n                <select name=\"user\" id=\"user\" ref={userTypeRef}>\n                    {userTypes.map(userType => (\n                        <option key={userType} value={userTypeKeys[userType]}>\n                            {userType}\n                        </option>\n                    ))}\n                </select><br/>\n                <label>Password</label> <br/>\n                <input ref={passwordRef} type=\"password\"/> <br/>\n                {error && <div className=\"error\">{error}</div>}\n                <Button type=\"submit\">Log In</Button>\n            </form>\n        </div>\n    )\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}