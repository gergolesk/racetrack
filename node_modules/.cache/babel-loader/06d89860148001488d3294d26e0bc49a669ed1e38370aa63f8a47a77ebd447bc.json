{"ast":null,"code":"var _jsxFileName = \"/home/georg/kood/racetrack/src/front/pages/RaceControlPage.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport RaceFlagsPage from \"./RaceFlagsPage\";\nimport Button from \"./components/Button/Button\";\nimport { formatTime } from \"../utils/formatTime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function RaceControlPage({\n  socket\n}) {\n  _s();\n  const [raceMode, setRaceMode] = useState(\"Danger\"); // Текущий флаг гонки\n  const [remainingTime, setRemainingTime] = useState(0); // Оставшееся время\n  const [isRaceRunning, setIsRaceRunning] = useState(false); // Идёт ли гонка\n  const [showControl, setShowControl] = useState(true); // Есть ли следующая гонка\n  const [isFinishMode, setIsFinishMode] = useState(false); // Режим Finish\n\n  useEffect(() => {\n    socket.emit(\"get_coming_running_race\");\n  }, [socket]);\n  useEffect(() => {\n    socket.on(\"race_state\", data => {\n      setRaceMode(data.raceMode);\n      setRemainingTime(data.remainingTime);\n      setIsRaceRunning(data.isRaceRunning);\n\n      // Включаем режим Finish, если состояние Finish\n      if (data.raceMode === \"Finish\") {\n        setIsFinishMode(true);\n      } else {\n        setIsFinishMode(false);\n      }\n    });\n    socket.on(\"has_coming_running_race\", data => {\n      setShowControl(data); // true или false\n    });\n    return () => {\n      socket.off(\"race_state\");\n      socket.off(\"has_coming_running_race\");\n    };\n  }, [socket]);\n  const startRace = () => {\n    socket.emit(\"start_race\");\n    setIsRaceRunning(true);\n    setIsFinishMode(false);\n  };\n  const stopRace = () => {\n    socket.emit(\"stop_race\");\n    setIsRaceRunning(false);\n    setIsFinishMode(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"race-control\",\n    children: [showControl ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Race Control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Race Mode: \", raceMode]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Time Remaining: \", formatTime(remainingTime)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          gap: \"5px\",\n          marginBottom: \"10px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => socket.emit(\"set_race_mode\", \"Safe\"),\n          disabled: !isRaceRunning || isFinishMode,\n          children: \"Safe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => socket.emit(\"set_race_mode\", \"Hazard\"),\n          disabled: !isRaceRunning || isFinishMode,\n          children: \"Hazard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => socket.emit(\"set_race_mode\", \"Danger\"),\n          disabled: !isRaceRunning || isFinishMode,\n          children: \"Danger\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => socket.emit(\"set_race_mode\", \"Finish\"),\n          disabled: !isRaceRunning || isFinishMode,\n          children: \"Finish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          gap: \"5px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: startRace,\n          disabled: isRaceRunning || isFinishMode,\n          children: \"Start Race\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: stopRace,\n          disabled: !isFinishMode && !isRaceRunning,\n          children: \"Stop Race\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mt-5\",\n      children: \"No more races\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(RaceFlagsPage, {\n      socket: socket,\n      raceMode: raceMode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(RaceControlPage, \"eAwxVdrI81fr7MQ299c+1qU/9po=\");\n_c = RaceControlPage;\nvar _c;\n$RefreshReg$(_c, \"RaceControlPage\");","map":{"version":3,"names":["useEffect","useState","RaceFlagsPage","Button","formatTime","jsxDEV","_jsxDEV","RaceControlPage","socket","_s","raceMode","setRaceMode","remainingTime","setRemainingTime","isRaceRunning","setIsRaceRunning","showControl","setShowControl","isFinishMode","setIsFinishMode","emit","on","data","off","startRace","stopRace","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","display","justifyContent","gap","marginBottom","onClick","disabled","_c","$RefreshReg$"],"sources":["/home/georg/kood/racetrack/src/front/pages/RaceControlPage.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport RaceFlagsPage from \"./RaceFlagsPage\";\nimport Button from \"./components/Button/Button\";\nimport {formatTime} from \"../utils/formatTime\";\n\nexport function RaceControlPage({socket}) {\n    const [raceMode, setRaceMode] = useState(\"Danger\"); // Текущий флаг гонки\n    const [remainingTime, setRemainingTime] = useState(0); // Оставшееся время\n    const [isRaceRunning, setIsRaceRunning] = useState(false); // Идёт ли гонка\n    const [showControl, setShowControl] = useState(true); // Есть ли следующая гонка\n    const [isFinishMode, setIsFinishMode] = useState(false); // Режим Finish\n\n    useEffect(() => {\n        socket.emit(\"get_coming_running_race\");\n    }, [socket]);\n\n    useEffect(() => {\n        socket.on(\"race_state\", (data) => {\n            setRaceMode(data.raceMode);\n            setRemainingTime(data.remainingTime);\n            setIsRaceRunning(data.isRaceRunning);\n\n            // Включаем режим Finish, если состояние Finish\n            if (data.raceMode === \"Finish\") {\n                setIsFinishMode(true);\n            } else {\n                setIsFinishMode(false);\n            }\n        });\n\n        socket.on(\"has_coming_running_race\", (data) => {\n            setShowControl(data); // true или false\n        });\n\n        return () => {\n            socket.off(\"race_state\");\n            socket.off(\"has_coming_running_race\");\n        };\n    }, [socket]);\n\n    const startRace = () => {\n        socket.emit(\"start_race\");\n        setIsRaceRunning(true);\n        setIsFinishMode(false);\n    };\n\n    const stopRace = () => {\n        socket.emit(\"stop_race\");\n        setIsRaceRunning(false);\n        setIsFinishMode(false);\n    };\n\n    return (\n        <div className=\"race-control\">\n            {showControl ? (\n                <div>\n                    <h1>Race Control</h1>\n                    <h2>Race Mode: {raceMode}</h2>\n                    <h2>Time Remaining: {formatTime(remainingTime)}</h2>\n\n                    {/* Кнопки управления */}\n                    <div style={{display: \"flex\", justifyContent: \"center\", gap: \"5px\", marginBottom: \"10px\"}}>\n                        <Button onClick={() => socket.emit(\"set_race_mode\", \"Safe\")}\n                                disabled={!isRaceRunning || isFinishMode}>\n                            Safe\n                        </Button>\n                        <Button onClick={() => socket.emit(\"set_race_mode\", \"Hazard\")}\n                                disabled={!isRaceRunning || isFinishMode}>\n                            Hazard\n                        </Button>\n                        <Button onClick={() => socket.emit(\"set_race_mode\", \"Danger\")}\n                                disabled={!isRaceRunning || isFinishMode}>\n                            Danger\n                        </Button>\n                        <Button onClick={() => socket.emit(\"set_race_mode\", \"Finish\")}\n                                disabled={!isRaceRunning || isFinishMode}>\n                            Finish\n                        </Button>\n                    </div>\n\n                    <div style={{display: \"flex\", justifyContent: \"center\", gap: \"5px\"}}>\n                        <Button onClick={startRace} disabled={isRaceRunning || isFinishMode}>\n                            Start Race\n                        </Button>\n                        <Button onClick={stopRace} disabled={!isFinishMode && !isRaceRunning}>\n                            Stop Race\n                        </Button>\n                    </div>\n                </div>\n            ) : (\n                <h2 className=\"mt-5\">No more races</h2>\n            )}\n            <br/>\n            <RaceFlagsPage socket={socket} raceMode={raceMode}/>\n            <br/>\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}